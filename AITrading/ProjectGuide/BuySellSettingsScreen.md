````
# 매수/매도 설정 화면 명세서

## 1. 개요
- **목적**: 사용자가 MFI, RSI, MACD와 같은 보조지표를 기반으로 매수/매도 전략을 설정하고, 설정한 전략을 백테스팅할 수 있는 화면입니다. 초보자를 위한 템플릿과 커스터마이징 기능을 제공하여 직관적인 전략 설정을 지원합니다.
- **대상 사용자**: 초보자 및 중급 트레이더.
- **주요 기능**:
  - 보조지표(MFI, RSI, MACD) 기반 매수/매도 임계값 설정.
  - 초보자용 전략 템플릿 제공.
  - 백테스팅 실행 및 결과 미리보기.
  - 전략 저장 및 관리.

## 2. 기능 요구사항

### 2.1 전략 설정
- **보조지표 선택**:
  - MFI, RSI, MACD 중 하나 이상을 선택할 수 있습니다.
  - 기본값: MFI.
- **임계값 설정**:
  - MFI: 매수 임계값(기본: 20), 매도 임계값(기본: 80).
  - RSI: 매수 임계값(기본: 30), 매도 임계값(기본: 70).
  - MACD: 매수 시그널(예: MACD > 시그널 라인), 매도 시그널(예: MACD < 시그널 라인).
- **기간 설정**:
  - 각 지표의 계산 기간을 설정할 수 있습니다(예: MFI 14일, RSI 14일, MACD 12-26-9).
- **손절/익절 설정**:
  - 손절 비율(기본: 5%), 익절 비율(기본: 10%).
- **자금 배분**:
  - 매수 시 사용할 자금 비율(기본: 10%).

### 2.2 전략 템플릿
- **템플릿 제공**:
  - "보수적 전략": MFI 20/80, 손절 5%, 익절 10%.
  - "공격적 전략": MFI 30/70, 손절 10%, 익절 15%.
  - "MACD 기본 전략": MACD 교차, 손절 5%, 익절 10%.
- **템플릿 선택**:
  - 사용자는 템플릿을 선택하여 설정을 자동으로 로드할 수 있습니다.
  - 커스터마이징 후 저장도 가능합니다.

### 2.3 백테스팅 실행
- **백테스팅 설정**:
  - 코인 선택(기본: BTC/KRW).
  - 기간 선택(기본: 6개월).
  - 초기 자금 설정(기본: 1000만원).
- **실행 및 결과**:
  - 백테스팅 실행 버튼을 통해 시뮬레이션 시작.
  - 결과는 수익률, MDD, 승률 등을 포함한 요약으로 표시.
  - 상세 결과는 로그/백테스팅 화면으로 이동하여 확인.

### 2.4 전략 저장 및 관리
- **전략 저장**:
  - 사용자는 설정한 전략을 이름으로 저장할 수 있습니다.
  - 저장된 전략은 나중에 불러와 수정하거나 실행할 수 있습니다.
- **전략 관리**:
  - 저장된 전략 목록을 확인하고, 삭제하거나 이름을 변경할 수 있습니다.

## 3. UI/UX 요구사항
- **레이아웃**:
  - **상단**: 전략 이름 입력 필드(기본: "새 전략").
  - **중앙**: 보조지표 선택 및 임계값 설정을 위한 폼.
  - **하단**: 템플릿 선택 버튼, 백테스팅 실행 버튼, 전략 저장 버튼.
- **인터랙션**:
  - 지표 선택 시 해당 설정 항목이 동적으로 표시.
  - 템플릿 선택 시 설정값이 자동으로 채워짐.
  - 백테스팅 실행 시 진행 상황을 표시하는 모달 창.
- **테마**: 다크 모드 기본, 설정에서 라이트 모드로 전환 가능.

## 4. 성능 요구사항
- **백테스팅 실행**: 비동기 처리로 UI 중단 없이 시뮬레이션 수행.
- **데이터 로드**: Core Data에서 과거 데이터를 빠르게 로드하여 시뮬레이션에 활용.

## 5. 데이터 모델
```swift
struct Strategy {
    var name: String
    var indicators: [Indicator]
    var stopLoss: Double
    var takeProfit: Double
    var allocation: Double
}

struct Indicator {
    var type: IndicatorType  // MFI, RSI, MACD
    var buyThreshold: Double?
    var sellThreshold: Double?
    var period: Int
}
```

## 6. API 및 데이터 통합
- **백테스팅 데이터**: Core Data에 저장된 과거 캔들 데이터 사용.
- **실시간 데이터**: 전략 실행 시 WebSocket을 통한 실시간 가격 반영.

## 7. 개발자 노트
- **SwiftUI**: `@State` 및 `@ObservedObject`로 전략 데이터 관리.
- **비동기 처리**: 백테스팅은 백그라운드 스레드에서 실행, 결과는 메인 스레드에서 표시.
- **저장소**: Core Data 또는 UserDefaults로 전략 저장.

## 8. 디자이너 노트
- **색상**:
  - 설정 항목: 흰색 텍스트, 회색 배경.
  - 버튼: 녹색(저장), 파랑(백테스팅 실행).
- **피드백**: 설정 변경 시 즉시 반영, 저장 시 애니메이션 추가.
````