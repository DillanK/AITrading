````
# API 테스트 화면 명세서

## 1. 개요
- **목적**: 사용자가 Bithumb API를 직접 호출하여 응답을 확인하고, API 호출 기록을 관리할 수 있는 화면입니다. 주로 개발자 및 고급 사용자를 위한 기능으로, 앱의 API 연동을 테스트하고 디버깅하는 데 사용됩니다.
- **대상 사용자**: 개발자, 고급 트레이더, API에 익숙한 사용자.
- **주요 기능**:
  - API 엔드포인트 선택 및 파라미터 설정.
  - API 호출 실행 및 응답 확인.
  - 호출 로그 관리(저장, 조회, 내보내기).
  - 실시간 데이터 모니터링.

## 2. 기능 요구사항

### 2.1 API 호출 설정
- **엔드포인트 선택**:
  - 사용자는 드롭다운 메뉴에서 호출할 API 엔드포인트를 선택합니다.
  - 예: `/public/ticker/{market}`, `/public/candlestick/{market}/{timeframe}` 등.
- **파라미터 설정**:
  - 선택한 엔드포인트에 따라 필요한 파라미터를 입력할 수 있는 필드를 동적으로 표시.
  - 예: `market` (기본: KRW-BTC), `timeframe` (기본: 1h).
- **인증 설정**:
  - 인증이 필요한 API의 경우, API 키와 시크릿을 입력할 수 있는 필드 제공.
  - 키는 Keychain에 안전하게 저장.

### 2.2 API 호출 실행
- **호출 실행**:
  - "호출" 버튼을 통해 API를 실행.
  - 호출 중에는 "실행 중..." 메시지와 스피너 표시.
- **응답 표시**:
  - 응답 데이터는 JSON 형식으로 하단에 표시.
  - 성공/실패 여부와 상태 코드를 함께 표시(예: "200 OK", "400 Bad Request").
- **오류 처리**:
  - 오류 발생 시 오류 메시지와 함께 "재시도" 버튼 제공.
  - 예: "네트워크 오류", "잘못된 API 키".

### 2.3 로그 관리
- **로그 저장**:
  - 각 API 호출의 요청/응답 데이터를 자동으로 저장.
  - 저장된 로그는 시간순으로 정렬.
- **로그 조회**:
  - 저장된 로그를 리스트 형태로 표시.
  - 각 로그 항목은 호출 시간, 엔드포인트, 성공/실패 여부를 포함.
- **로그 상세 보기**:
  - 로그 항목을 탭하면 요청/응답의 상세 정보를 팝업으로 표시.
- **로그 내보내기**:
  - 선택한 로그를 JSON 또는 CSV 형식으로 내보낼 수 있는 기능.
  - 예: "내보내기" 버튼을 통해 파일 저장 또는 공유.

### 2.4 실시간 데이터 모니터링
- **WebSocket 모니터링**:
  - WebSocket 연결을 통해 실시간 데이터를 모니터링할 수 있는 기능.
  - 예: `/public/ws/{market}`를 통해 실시간 가격 변동을 표시.
- **UI 업데이트**:
  - 실시간 데이터는 별도의 패널에 표시되며, 자동으로 갱신.

## 3. UI/UX 요구사항
- **레이아웃**:
  - **상단**: 엔드포인트 선택 드롭다운, 파라미터 입력 필드, "호출" 버튼.
  - **중앙**: 응답 데이터 표시 영역(스크롤 가능).
  - **하단**: 로그 리스트(호출 시간, 엔드포인트, 상태).
- **인터랙션**:
  - 엔드포인트 선택 시 파라미터 필드가 동적으로 변경.
  - 로그 항목을 탭하면 상세 정보가 팝업으로 표시.
  - 응답 데이터는 JSON 트리 형태로 접기/펼치기 가능.
- **테마**: 다크 모드 기본, 코드 하이라이팅으로 가독성 향상.

## 4. 성능 요구사항
- **API 호출**: 비동기 처리로 UI 중단 없이 응답 대기.
- **로그 관리**: Core Data를 사용해 효율적인 로그 저장 및 조회.
- **실시간 데이터**: WebSocket을 통한 데이터는 UI에 즉시 반영.

## 5. 데이터 모델
```swift
struct APILog {
    let id: UUID
    let timestamp: Date
    let endpoint: String
    let parameters: [String: String]
    let response: String
    let statusCode: Int
}
```

## 6. API 및 WebSocket 통합
- **API 호출**: Moya를 통해 `/public/*` 및 `/private/*` 엔드포인트 호출.
- **인증**: `/private/*` 엔드포인트는 API 키와 시크릿을 사용한 HMAC-SHA512 서명.
- **WebSocket**: `/public/ws/{market}`를 통해 실시간 데이터 수신.

## 7. 개발자 노트
- **SwiftUI**: `@State` 및 `@ObservedObject`로 API 응답 및 로그 관리.
- **비동기 처리**: `async/await`를 사용해 API 호출 및 로그 저장.
- **Core Data**: 로그 데이터를 저장하고, 최근 100개 로그만 유지.

## 8. 디자이너 노트
- **색상**:
  - 응답 성공: 녹색, 실패: 적색.
  - 로그 항목: 흰색 텍스트, 회색 배경.
- **피드백**: 호출 성공/실패 시 애니메이션 또는 소리로 알림.
````