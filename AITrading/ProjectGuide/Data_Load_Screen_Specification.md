````
# 데이터 로드 화면 명세서

## 1. 개요
- **목적**: 사용자가 선택한 코인과 기간에 대한 대량의 과거 데이터를 로드하고, 로컬 캐싱을 관리하여 앱의 성능과 오프라인 사용을 지원하는 화면입니다. 주로 백테스팅 및 차트 분석에 필요한 데이터를 처리합니다.
- **대상 사용자**: 중급 이상의 트레이더 및 데이터 분석가.
- **주요 기능**:
  - 선택한 코인과 시간 단위(1분봉 ~ 1개월봉)에 대한 과거 데이터 로드.
  - 캐시된 데이터의 관리(조회, 업데이트, 삭제).
  - 데이터 로드 진행 상황 표시 및 오류 처리.
  - 직관적인 UI를 통한 데이터 관리.

## 2. 기능 요구사항

### 2.1 데이터 로드
- **코인 선택**:
  - 사용자는 로드할 코인을 선택할 수 있습니다(기본: BTC/KRW, ETH/KRW).
  - 다중 선택 가능(예: BTC/KRW, ETH/KRW 동시 로드).
- **시간 단위 선택**:
  - 1분, 5분, 15분, 30분, 1시간, 4시간, 1일, 1주, 1개월.
  - 기본값: 1시간.
- **기간 설정**:
  - 시작일과 종료일을 지정하여 특정 기간의 데이터를 로드.
  - 기본값: 최근 1년.
- **데이터 로드 실행**:
  - "로드 시작" 버튼을 통해 데이터 로드를 시작.
  - 로드 중에는 진행 상황을 표시(예: 50% 완료).
- **로드 옵션**:
  - "전체 새로고침": 기존 캐시를 무시하고 새로 로드.
  - "캐시 업데이트": 기존 캐시를 유지하고 새로운 데이터만 추가.

### 2.2 캐시 관리
- **캐시 조회**:
  - 현재 캐시된 코인, 기간, 데이터 크기를 표시.
  - 예: "BTC/KRW, 1시간봉, 2023-01-01 ~ 2025-06-18, 500MB".
- **캐시 삭제**:
  - 특정 코인 또는 전체 캐시를 삭제할 수 있는 기능.
  - 삭제 전 확인 팝업 표시.
- **캐시 업데이트**:
  - 캐시된 데이터를 최신 상태로 업데이트.
  - "업데이트" 버튼을 통해 수동으로 실행.

### 2.3 진행 상황 및 오류 처리
- **진행 상황**:
  - 데이터 로드 중 진행률 바 또는 스피너를 표시.
  - 로드 완료 시 "로드 완료" 메시지 표시.
- **오류 처리**:
  - 네트워크 오류: "네트워크 연결을 확인하세요" 메시지와 "재시도" 버튼.
  - API 오류: "데이터를 가져올 수 없습니다" 메시지와 오류 코드 표시.
  - 로드 취소: 사용자가 로드 중 취소할 수 있는 버튼 제공.

### 2.4 오프라인 모드
- **캐시된 데이터 표시**:
  - 네트워크가 끊겼을 때 캐시된 데이터를 자동으로 표시.
  - "오프라인 모드" 알림을 상단에 표시.

## 3. UI/UX 요구사항
- **레이아웃**:
  - **상단**: 코인 선택 드롭다운, 시간 단위 선택, 기간 설정(달력 UI).
  - **중앙**: 로드 옵션(전체 새로고침, 캐시 업데이트), "로드 시작" 버튼.
  - **하단**: 캐시된 데이터 목록(코인, 기간, 크기), "업데이트" 및 "삭제" 버튼.
- **인터랙션**:
  - 코인 선택 시 해당 코인의 캐시 정보가 동적으로 표시.
  - 로드 중에는 "로드 중..." 메시지와 취소 버튼 표시.
  - 오류 발생 시 팝업 알림으로 사용자에게 안내.
- **테마**: 다크 모드 기본, 설정에서 라이트 모드로 전환 가능.

## 4. 성능 요구사항
- **데이터 로드**: 비동기 처리로 UI 중단 없이 대량 데이터 로드.
- **캐시 관리**: Core Data를 사용해 효율적인 데이터 저장 및 조회.
- **페이징**: 대량 데이터는 페이징 처리(예: 1개월 단위)로 로드.

## 5. 데이터 모델
```swift
struct CachedData {
    let coin: String  // 예: "BTC/KRW"
    let timeframe: String  // 예: "1h"
    let startDate: Date
    let endDate: Date
    let size: Int  // 바이트 단위
}
```

## 6. API 및 데이터 통합
- **데이터 로드**: `/public/candlestick/{market}/{timeframe}`를 사용해 과거 데이터 가져오기.
- **페이징**: 대량 데이터는 `start_time`과 `end_time`을 설정해 구간별로 로드.
- **캐시 저장**: Core Data에 코인별, 시간 단위별로 데이터 저장.

## 7. 개발자 노트
- **SwiftUI**: `@State` 및 `@ObservedObject`로 데이터 상태 관리.
- **비동기 처리**: `async/await`를 사용해 데이터 로드 및 캐시 관리.
- **Core Data**: 과거 캔들 데이터를 효율적으로 저장하고 조회.

## 8. 디자이너 노트
- **색상**:
  - 진행률 바: 파랑(진행 중), 녹색(완료).
  - 오류 메시지: 적색.
- **피드백**: 로드 완료 시 애니메이션 또는 소리로 알림.
````