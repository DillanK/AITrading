````
# 메인 화면 명세서

## 1. 개요
- **목적**: 사용자가 선택한 코인의 상세 차트와 기술적 지표(MFI, RSI, MACD)를 시각적으로 확인하고, 거래 전략을 미리 볼 수 있도록 하는 화면입니다.
- **대상 사용자**: 초보자 및 중급 트레이더.
- **주요 기능**:
  - 캔들 차트 표시 (1분봉 ~ 1개월봉).
  - 기술적 지표(MFI, RSI, MACD) 시각화.
  - 백테스팅 결과 미리보기.
  - 차트 커스터마이징 및 사용자 친화적 UI.

## 2. 기능 요구사항

### 2.1 캔들 차트
- **데이터**:
  - 선택한 코인의 시가, 고가, 저가, 종가(OHLC).
  - 거래량.
- **시간 단위**:
  - 1분, 5분, 15분, 30분, 1시간, 4시간, 1일, 1주, 1개월.
  - 기본값: 1시간.
- **동작**:
  - 스크롤 및 핀치 줌으로 과거 데이터 탐색.
  - 실시간 데이터는 WebSocket을 통해 업데이트.
  - 데이터는 `/public/candlestick/{market}/{timeframe}`에서 가져옴.
- **UI**:
  - SwiftUI의 `Chart` 또는 `Canvas`를 사용해 캔들스틱 차트 구현.
  - 거래량은 캔들 하단에 바 차트로 표시.

### 2.2 기술적 지표
- **지표**:
  - MFI (14기간).
  - RSI (14기간).
  - MACD (12, 26, 9).
- **동작**:
  - 차트 하단에 별도 패널로 표시.
  - 사용자는 지표를 선택/해제할 수 있음 (기본: MFI).
  - 지표는 캔들 데이터로부터 실시간 계산.
- **UI**:
  - 지표별로 색상 구분 (MFI: 파랑, RSI: 주황, MACD: 초록/빨강).
  - 임계값 강조 (MFI 20/80, RSI 30/70).

### 2.3 백테스팅 미리보기
- **데이터**:
  - 최근 백테스팅 결과의 수익률, MDD, 승률.
- **동작**:
  - 하단에 카드 형태로 표시.
  - 탭 시 전체 백테스팅 화면으로 이동.
- **UI**:
  - 간단한 텍스트 요약 (예: "MFI 전략: +15%, MDD: 5%").
  - 색상으로 성과 강조 (녹색: 양호, 적색: 주의).

### 2.4 차트 커스터마이징
- **옵션**:
  - 캔들 색상 (기본: 녹색 상승, 적색 하락).
  - 테마 (다크/라이트 모드).
  - 그리드 라인 표시 여부.
- **동작**:
  - 설정 페이지에서 변경 가능.
  - 변경 즉시 차트에 반영.

## 3. UI/UX 요구사항
- **레이아웃**:
  - **상단 툴바**: 코인 이름, 시간 단위 선택.
  - **차트 영역**: 캔들 차트, 거래량, 지표 패널.
  - **하단 패널**: 백테스팅 미리보기 카드.
- **인터랙션**:
  - 차트에서 특정 지점을 터치하면 해당 시점의 OHLC, 지표 값 팝업.
  - 스크롤로 과거 데이터 탐색, 핀치 줌으로 확대/축소.
- **테마**: 다크 모드 기본, 사용자 선택에 따라 라이트 모드 전환.

## 4. 성능 요구사항
- **데이터 로드**: 초기 로드 시 1개월 데이터, 스크롤 시 추가 데이터 페이징.
- **실시간 업데이트**: WebSocket을 통한 부드러운 차트 업데이트.
- **최적화**: 대량 데이터 처리 시 지연 없도록 캐싱 및 비동기 처리.

## 5. 데이터 모델
```swift
struct Candle {
    let timestamp: Date
    let open: Double
    let high: Double
    let low: Double
    let close: Double
    let volume: Double
}
```

## 6. API 및 WebSocket 통합
- **초기 데이터**: `/public/candlestick/{market}/{timeframe}`.
- **실시간 데이터**: `/public/ws/{market}`.

## 7. 개발자 노트
- **SwiftUI**: `Chart` 뷰로 캔들스틱 구현, `ScrollView`와 `MagnificationGesture`로 상호작용.
- **비동기 처리**: 지표 계산은 백그라운드에서, UI는 메인 스레드에서 갱신.
- **캐싱**: Core Data에 캔들 데이터 저장, 재계산 최소화.

## 8. 디자이너 노트
- **색상**:
  - 캔들: 녹색 상승, 적색 하락.
  - 지표: MFI 파랑, RSI 주황, MACD 초록/빨강.
- **피드백**: 차트 터치 시 팝업 애니메이션, 지표 선택 시 강조 효과.

---

이 명세서는 메인 화면의 모든 기능을 상세히 설명하며, 개발자와 디자이너가 바로 활용할 수 있도록 구체적인 지침을 제공합니다. 추가 질문이나 수정 사항이 있으면 언제든 말씀해 주세요!
````